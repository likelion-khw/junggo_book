<!--정보수정-->
<div class="modal fade" id="edit_info" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">기본정보 수정</h4>
      </div>
      
      <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), html: { method: :put }) do |f| %>
      <div class="modal-body">
        
          <%= devise_error_messages! %>
          
        <!--%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>-->
          <h4 align="left">* 필수항목 </h4>
                        
            <div class="input-group">
              <span class="input-group-addon" id="basic-addon1">이메일</span>
              <%= f.email_field :email, autofocus: true, :class => "form-control", :value => current_user.email, disabled: true %>
            </div><!-- /input-group -->
            
            <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
              <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
            <% end %>
            
            <br>
            
            <div class="input-group">
              <span class="input-group-addon" id="basic-addon1">닉네임</span>
              <%= f.text_field :nickname, autofocus: true, :class => "form-control", :value => current_user.nickname, required: true %>
              <span class="input-group-btn">
                <button class="btn btn-default" type="button">중복확인</button>
              </span>
            </div><!-- /input-group -->
            
            <br>
            
            <div class="input-group">
              <span class="input-group-addon" id="basic-addon1">휴대폰 번호</span>
              <%= f.text_field :phone, autofocus: true, :class => "form-control", :value => current_user.phone, required: true %>
              <span class="input-group-btn">
                <button class="btn btn-default" type="button">인증</button>
              </span>
            </div><!-- /input-group -->
            <br>
            
            <div class="input-group has-error">
              <span class="input-group-addon" id="basic-addon1">현재 비밀번호</span>
              <%= f.password_field :current_password, autocomplete: "off", :class => "form-control",:placeholder => "입력해주세요" , required: true %>
            </div><!-- /input-group -->
          
            <br>
            
            <h4 align="left">* 선택항목 </h4>
            
            <div class="input-group">
              <span class="input-group-addon" id="basic-addon1">학과</span>
              <%= f.text_field :major, autofocus: true, :class => "form-control", :value => current_user.major %>
            </div><!-- /input-group -->
            
            <br>
            
            <div class="input-group">
              <span class="input-group-addon" id="basic-addon1">이름</span>
              <%= f.text_field :name, autofocus: true, :class => "form-control", :value => current_user.name %>
            </div><!-- /input-group -->
            
            <br><br>
            
      </div>
      <div class="modal-footer">
        
        <div class="actions" style = "font-size:25px">
          <button type="button" class="btn btn-default btn-lg font-hanna" data-dismiss="modal">닫기</button>
          <input type="submit" name="commit" class="btn btn-primary btn-lg font-hanna" value="수 정">
        </div>
      </div>
      <% end %>
    </div>
  </div>
</div>

<!--비번수정-->
<div class="modal fade" id="edit_password" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">비밀번호 변경</h4>
      </div>
      
      <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), html: { method: :put }) do |f| %>
      <div class="modal-body">
       
          <%= devise_error_messages! %>
          
          <div class="input-group has-warning">
            <span class="input-group-addon" id="basic-addon1">변경 비밀번호</span>
            <%= f.password_field :password, autocomplete: "off", :class => "form-control",:placeholder => "입력해주세요" , required: true %>
          </div><!-- /input-group -->
        
          <br>
          
          <div class="input-group has-warning">
            <span class="input-group-addon" id="basic-addon1">변경 비밀번호 확인</span>
            <%= f.password_field :password_confirmation, autocomplete: "off", :class => "form-control",:placeholder => "입력해주세요" , required: true %>
          </div><!-- /input-group -->
        
          <br>
          
          <div class="input-group has-error">
            <span class="input-group-addon" id="basic-addon1">현재 비밀번호</span>
            <%= f.password_field :current_password, autocomplete: "off", :class => "form-control",:placeholder => "입력해주세요" , required: true %>
          </div><!-- /input-group -->
        
          <br>
          
      </div>
      <div class="modal-footer">
        <div class="actions" style = "font-size:25px">
          <button type="button" class="btn btn-default btn-lg font-hanna" data-dismiss="modal">닫기</button>
          <input type="submit" name="commit" class="btn btn-primary btn-lg font-hanna" value="변 경">
        </div>
      </div>
      <% end %>
    </div>
  </div>
</div>

<!--탈퇴하기-->
<div class="modal fade" id="destroy_user" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">회원 탈퇴</h4>
      </div>
      <div class="modal-body">
        recapcha 쓸 예정
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <%= button_to "탈퇴하기", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, :class => 'btn btn-danger btn-lg font-hanna' %>
      </div>
    </div>
  </div>
</div>

<!--구입 취소-->
<% Book.where('buyer =?',current_user.id).each do |book|%>
  <form action="/share/buy_del" method="post">
    <div class="modal fade" id="buy_del_<%=book.id%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">구입 취소</h4>
          </div>
          <div class="modal-body">
            해당 품목 구입을 취소하시겠습니까?
          </div>
  
          <div class="modal-footer">
            <button value="<%=book.id%>" name="buy_del" type="submit" class="btn btn-default">예</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">아니요</button>
            
          </div>
          
        </div>
      </div>
    </div>
  </form>
<%end%>

<!--판매취소-->
<% Book.where('user_id =?',current_user.id).each do |book|%>
  <form action="/share/sel_del" method="post">
    <div class="modal fade" id="sel_del_<%=book.id%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">판매 취소</h4>
          </div>
          <div class="modal-body">
            해당 품목 판매를 삭제하시겠습니까?
          </div>
          
          <div class="modal-footer">
            <button value="<%=book.id%>" name="sel_del" type="submit" class="btn btn-default">예</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">아니요</button>
            
          </div>
        
        </div>
      </div>
    </div>
  </form>
<%end%>

<!--해당 회원과의 거래취소-->
<% Book.where('status =?',"거래중").each do |book|%>
  <form action="/share/buy_del" method="post">
    <div class="modal fade" id="deal_cancel_<%=book.id%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">거래 취소</h4>
          </div>
          <div class="modal-body">
            <u><b><%=User.find(book.buyer).nickname%></b></u>님과 <u><b>[<%=book.book_category%>] <%=book.book_title%></b></u>에 대한 거래를 취소하시겠습니까?
          </div>
          
          <div class="modal-footer">
            <button value="<%=book.id%>" name="buy_del" type="submit" class="btn btn-default">예</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">아니요</button>
            
          </div>
        
        </div>
      </div>
    </div>
  </form>
<%end%>

<!--해당 회원과의 판매완료-->
<% Book.where('status =?',"거래중").each do |book|%>
  <form action="/share/deal_end" method="post">
    <div class="modal fade" id="deal_end_<%=book.id%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">판매완료</h4>
          </div>
          <div class="modal-body">
            <u><b><%=User.find(book.buyer).nickname%></b></u>님에게 판매가 완료되셨습니까?<br>
            '예'를 누르시면 해당 품목에 대해 판매가 확정됩니다.
          </div>
          
          <div class="modal-footer">
            <button value="<%=book.id%>" name="deal_num" type="submit" class="btn btn-default">예</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">아니요</button>
            
          </div>
        
        </div>
      </div>
    </div>
  </form>
<%end%>

<!--책 정보수정-->
<% Book.where('user_id =?',current_user.id).each do |book|%>
  <form action="/share/edit_book" method="post">
    <div class="modal fade" id="edit_book_<%=book.id%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">책 정보를 수정합니다</h4>
          </div>
          <div class="modal-body">
            <u><b>책 정보를 수정합니다.<br>
            '예'를 누르시면 해당 품목에 대해 판매가 확정됩니다.
          </div>
          
          <div class="modal-footer">
            <button value="<%=book.id%>" name="deal_num" type="submit" class="btn btn-default">예</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">아니요</button>
            
          </div>
        
        </div>
      </div>
    </div>
  </form>
<%end%>